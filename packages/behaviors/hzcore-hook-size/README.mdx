---
name: useSize
menu: Hooks
route: /use-size
---

import {Playground} from 'docz';
import useSize from './src';

# useSize

A React [hook] for components that care about their size.

## Installation

```shell
yarn add @hzcore/hook-size
```

## Usage

```js
import useSize from '@hzcore/hook-size';
```

### Signature

```ts
function useSize(): [Size, React.RefObject<HTMLElement>];
```

or, with a `providedRef`:

```ts
function useSize(providedRef: React.RefObject<HTMLElement>): Size;
```

### providedRef: `providedRef?: React.RefObject<HTMLElement>`

An optional ref object to use.
Useful when the component needs to handle ref forwarding.

See [Usage with Shared Ref / Ref Forwarding] for more.

### returns `Size | [Size, (node: HTMLElement | null) => void]`

If a `providedRef` is passed to `useSize`, returns a `Size` value.

If no `providedRef` is passed, returns an array containing a
`Size` object and a `ref` object. The `ref` should be passed
to an underlying DOM node.

The `Size` object shape is:

```ts
interface Size {
  /** The x coordinate of the DOMRect's origin. */
  x: number;
  /** The y coordinate of the DOMRect's origin. */
  y: number;
  /** The width of the DOMRect. */
  width: number;
  /** The height of the DOMRect. */
  height: number;
  /**
   * The top coordinate value of the DOMRect
   * (has the same value as y, or y + height if height is negative.)
   */
  top: number;
  /**
   * The right coordinate value of the DOMRect
   * (has the same value as x + width, or x if width is negative.)
   */
  right: number;
  /**
   * The bottom coordinate value of the DOMRect
   * (has the same value as y + height, or y if height is negative.)
   */
  bottom: number;
  /**
   * The left coordinate value of the DOMRect
   * (has the same value as x, or x + width if width is negative.)
   */
  left: number;
  /**
   * The DOMRect width as a percentage of the viewport width
   * (where 0 is 0% and 1 is 100%.)
   */
  vw: number;
  /**
   * The DOMRect height as a percentage of the viewport height
   * (where 0 is 0% and 1 is 100%.)
   */
  vh: number;
}
```

## Example

<Playground>
  {() => {
    const SizeUser = () => {
      const [size, ref] = useSize();
      return (
        <div
          ref={ref}
          style={{
            width: '100%',
            height: '100%',
            flex: 1,
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            border: '1px solid lime',
          }}
        >
          <pre>{JSON.stringify(size, null, 2)}</pre>
        </div>
      );
    };
    return <SizeUser />;
  }}
</Playground>

## Usage with Shared Ref / Ref Forwarding

Sometimes a component needs to [forward a ref] to its children,
or [use a ref][useref] with other hooks.
To support these cases, `useSize` accepts an optional `providedRef` argument:

```js
const SomeRefForwardingComponent = React.forwardRef((props, forwardedRef) => {
  // We pass `forwardedRef` (which _must_ be a ref object)
  // to `useSize`. Note that a `ref` will _not_ be returned
  // with the `size` value.
  const size = useSize(forwardedRef);
  return <div ref={forwardedRef}>{JSON.stringify(size, null, 2)}</div>;
});
```

or, with `useRef`:

```js
const SomeRefUsingComponent = () => {
  const ref = React.useRef(null);
  // We pass `ref` to `useSize`.
  // Note that a `ref` will _not_ be returned with the `size` value.
  const size = useSize(ref);
  return <div ref={ref}>{JSON.stringify(size, null, 2)}</div>;
};
```

[hook]: https://reactjs.org/docs/hooks-overview.html
[ref]: https://reactjs.org/docs/refs-and-the-dom.html
[useref]: https://reactjs.org/docs/hooks-reference.html#useref
[ref object]: https://reactjs.org/docs/refs-and-the-dom.html#accessing-refs
[forward a ref]: https://reactjs.org/docs/forwarding-refs.html
[usage with shared ref / ref forwarding]: #usage-with-shared-ref--ref-forwarding
