---
name: useScrolling
menu: Hooks
route: /use-scrolling
---

import {Playground, Props} from 'docz';
import useScrolling from './src/useScrolling';

# useScrolling

A React [hook] for components that care about whether or not
the nearest scrollable container is scrolling.

## Installation

```shell
yarn add @hzcore/scroll-monitor
```

## Usage

```js
import {useScrolling} from '@hzcore/scroll-monitor';
```

`useScrolling` supports using an existing [ref object].
(See [shared ref / ref forwarding] for more).

This means `useScrolling` has 2 different signatures:

Without an existing [ref object]:

```ts
function useScrolling(): [boolean, React.RefObject<HTMLElement>];
```

The returned [ref object] should be passed to an underlying DOM node.

With an existing [ref object]:

```ts
function useScrolling(providedRef: React.RefObject<HTMLElement>): boolean;
```

Note that `useScrolling` will _not_ return a [ref object] in this case.
The provided [ref object] is expected to be passed to an underlying DOM node.

## State

If a `providedRef` is passed to `useScrolling`,
returns a boolean value, that indicates whether or not
the nearest scrollable container is scrolling.

If no `providedRef` is passed, returns an array containing a boolean
and a `ref` object. The `ref` should be passed to an underlying DOM node.
Note that the node does not have to be scrollable itself,
as `useScrolling` will traverse the DOM to find a scrollable parent
to observe.

The returned boolean is `true` when the nearest
scrollable container is scrolling, and `false` when it is not.

## Example

<Playground>
  {() => {
    const ScrollingUser = () => {
      const [scrolling, ref] = useScrolling();
      return (
        <div
          ref={ref}
          style={{
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            width: '100%',
            height: 250,
            fontSize: '2em',
            color: `${scrolling ? 'white' : 'yellow'}`,
            background: `${scrolling ? 'green' : 'red'}`,
          }}
        >
          {scrolling ? 'scrolling' : 'not scrolling'}
        </div>
      );
    };
    return <ScrollingUser />;
  }}
</Playground>

## Shared Ref / Ref Forwarding

Sometimes a component needs to [forward a ref] to its children,
or [use a ref][useref] with other hooks.
To support these cases, `useScrolling`
accepts an optional `providedRef` [ref object]:

```js
const SomeRefForwardingComponent = React.forwardRef((props, forwardedRef) => {
  // We pass `forwardedRef` (which _must_ be a ref object)
  // to `useScrolling`. Note that a `ref`
  // will _not_ be returned with the `scrolling` value.
  const scrolling = useScrolling(forwardedRef);
  return (
    <div ref={forwardedRef}>{scrolling ? 'Scrolling' : 'Not Scrolling'}</div>
  );
});
```

or, with `useRef`:

```js
const SomeRefUsingComponent = () => {
  const ref = React.useRef(null);
  // We pass `ref` to `useScrolling`.
  // Note that a `ref` will _not_ be returned with the `scrolling` value.
  const scrolling = useScrolling(ref);
  return <div ref={ref}>{scrolling ? 'Scrolling' : 'Not Scrolling'}</div>;
};
```

[hook]: https://reactjs.org/docs/hooks-overview.html
[ref]: https://reactjs.org/docs/refs-and-the-dom.html
[useref]: https://reactjs.org/docs/hooks-reference.html#useref
[ref object]: https://reactjs.org/docs/refs-and-the-dom.html#accessing-refs
[forward a ref]: https://reactjs.org/docs/forwarding-refs.html
[installation]: #installation
[usage]: #usage
[handler]: #handler
[state]: #state
[example]: #example
[shared ref / ref forwarding]: #shared-ref--ref-forwarding
